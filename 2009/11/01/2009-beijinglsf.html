<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1">
<meta name="renderer" content="webkit">
<meta name="google" value="notranslate">
<meta name="robots" content="index,follow">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bard&#39;s Gallery">
<meta name="twitter:description" content="Into Something Rich and Strange">
<meta name="twitter:image:src" content="https://bergwolf.me/images/avatar.png">

<meta property="og:url" content="https://bergwolf.me">
<meta property="og:title" content="Bard&#39;s Gallery">
<meta property="og:description" content="Into Something Rich and Strange">
<meta property="og:site_name" content="Bard&#39;s Gallery">
<meta property="og:image" content="https://bergwolf.me/images/avatar.png">
<meta property="og:type" content="website">
<meta name="robots" content="noodp">

<meta itemprop="name" content="Bard&#39;s Gallery">
<meta itemprop="description" content="Into Something Rich and Strange">
<meta itemprop="image" content="https://bergwolf.me/images/avatar.png">

<link rel="canonical" href="https://bergwolf.me">

<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-itouch-icon" href="/favicon.png">
<link rel="stylesheet" href="/bundle/index.css">
<script type="text/javascript">
    var timeSinceLang = {
        year: ' years ago',
        month: ' months ago',
        day: ' days ago',
        hour: ' hours ago',
        minute: ' minutes ago',
        second: ' seconds ago'
    };
    var root = '';
</script>


        <meta name="keywords" content="我的大学,LSF,">
        <meta name="description" content="2009 BeijingLSF小记">
        <meta name="author" content="Bergwolf">
        <title>2009 BeijingLSF小记</title>
    </head>
    <body>
        <article class="container">
            <header class="header-wrap">
  <a class="index" href="/">
    <img class="logo" src="/images/avatar.png" />
    Bard&#39;s Gallery
  </a>
  <ul class="menu">
      <li class="menu-item"><a href="/archive.html">ARCHIVE</a></li>
      <li class="menu-item"><a href="/tag.html">TAG</a></li>
      <li class="menu-item"><a href="/atom.xml">RSS</a></li>
  </ul>
</header>

            <article class="main article">
                <h1 class="title">2009 BeijingLSF小记</h1>
                <section class="info">
                    <span class="avatar" style="background-image: url(/images/avatar.png);"></span>
                    <a class="name" href="/about.me.html">Bergwolf</a>
                    
                    <span class="date" data-time="1257048000"><span class="from"></span></span>
                    
                    <span class="tags"><a class="tag" href="/tag/%e6%88%91%e7%9a%84%e5%a4%a7%e5%ad%a6/index.html">我的大学</a><a class="tag" href="/tag/LSF/index.html">LSF</a></span>
                </section>
                <article class="content"><p>又是一篇迟到的blog，我似乎总在记录很久以前的事情？</p>

<p>BeijingLSF是由Coly Li，Ma Tao, Wu FengGuang等国内一线的Linux内核IO相关的开发者发起的Linux存储与文件系统研讨会。为了节省旅行开销，这次研讨会于2009年10月24日－－CLK的前一天在北邮教三召开。我有幸作为志愿者全程参与了此次盛会。</p>

<p>在我之前，已经有ColyLi和Wang Xu两位分别写了blog记录这次会议，连接如下：</p>

<ul>
<li><a href="http://blog.coly.li/?p=24">http://blog.coly.li/?p=24</a></li>
<li><a href="http://wangxu.me/blog/?p=275">http://wangxu.me/blog/?p=275</a></li>
</ul>

<p>如果对当日的PP感兴趣，请看这里:<a href="http://picasaweb.google.com/colyli/BeijingLSF2009">http://picasaweb.google.com/colyli/BeijingLSF2009</a></p>

<p>当日的日程如下：</p>

<ul>
<li>9:20 – 10:00  Distributed Lock Manager - lead by Coly Li</li>
<li>10:20-11:00  Clustering File System - lead by Tao Ma</li>
<li>11:20-12:00  Shared Storage and Snapshot - lead by Xinwei Hu</li>
<li>13:30-14:10  VFS readahead/writeback - lead by Fengguang Wu</li>
<li>14:30-15:10  I/O Controller and I/O Bandwidth - lead by Jianfeng Gui</li>
<li>15:30-16:10  Interaction with Industry - lead by Lenovo engineers</li>
<li>16:30-17:10  Light Talk and Summary - 2 minutes for each
&mdash;
由于当志愿者的关系，我并没有完整的听到(偷:)所有的讨论，这里记录下我的见闻。</li>
</ul>

<p>第一个talk是Coly Li介绍讨论分布式锁管理中目前遇到的问题，大家都觉得Coly选择了ocfs2中最困难的部门，对他颇为同情，同时对一些问题的细节展开了讨论。这部门我一直做打杂，没怎么听到（残念。。。）</p>

<p>第二个话题本来是马涛主持讨论集群文件系统，大家在这个talk之前决定来次全场的自我介绍，而自我介绍阶段大家又花了不少时间围观apt大牛，导致这个环节的时间不是很充足。好在第二天的CLK上马涛做了同样的演讲，这里我可以来八一八。目前马涛在ocfs2上实现了reflink特性，这个特性的作用是把新文件的元数据指向原文件的同一块数据块，同时用引用计数记录数据块的引用数，这样实现了多个文件共享同一个物理块，达到了节省磁盘空间的目的，与EMC的dedup有异曲同工之效。直觉上reflink特性在btrfs这样的树形文件系统中更为自然，而在ocfs2上的实现估计会有不小改动。一个好消息是reflink在将来会成为一个系统调用，这样别的文件系统也可以去实现类似的功能（btrfs上已经有类似的功能了，使用BTRFS_IOC_CLONE这个ioctl实现）。</p>

<p>第三个话题是胡欣慰主持讨论共享存储和快照。这部分重点阐释了drbd, dm, md的区别。想来暑期实习的时候向mentor推荐lvm，他问我有什么好处，当时没能把他说服。现在看来，lvm最吸引人的地方应该是快照功能，腾讯的OP似乎还没有意识到lvm的好处，有机会去给他们科普科普:)</p>

<p>第四个话题是吴峰光介绍VFS的预读和写回。这部分的代码我也在之前看过一些，所以听起来还算不怎么吃力。其中也接触到了一些新的概念，比如kernel预读的抖动等。内核预读算是文件系统和内存管理两个子系统的交集。印象最深的是吴的实现比以前更好的是把预读的位置保存在了不同的位置，使得一个文件能够有多条预读流。</p>

<p>第五个话题是归剑峰主持介绍cgroups的IO controller。以前对cgroups只是听说过，在听了归的介绍后，大致对IO controller的目的有了些了解，但是实现细节还是没听懂。好在后来在吃饭的时候有幸和cgroups的maintainer李泽帆坐到了一起，乘机抓了一阵狂问，总算把自己的疑惑解释的差不多了。之前不能理解的问题主要是IO控制器并不能知道当时磁盘的读写速度（因为磁盘寻道的原因，读写速度是不稳定的）。在请教了李泽帆后明白了IO控制器并不通过绝对读写速度来控制进程IO，而是通过IO的时间和读写的sector数目来控制。cgroups是个很有用的子系统，特别是在大规模计算的时候执行资源控制，以后可以多关注。</p>

<p>第六个话题是联想研究院的卢亿雷主持讨论他们在网盘系统开发中遇到的实际问题。这部分大家主要关注性能和数据一致性上的问题。</p>

<p>六个话题结束后是lighting talk,大家纷纷对组委会表达了谢意并期待明年的BeijingLSF。有好几位主动提出明年要提供赞助，足见大家的热心。会后由Intel赞助，大家一起去全聚德腐败了一顿，想不到我的第一次全聚德，居然是和这么多牛人一起吃的，太激动了~~~</p>

<p>总结起来，这算是国内Linux IO相关的内核开发者的第一次专门讨论会，到来的也都是活跃在Linux内核开发的一线开发者，能有这么一次近距离接触牛人的机会，真的要感谢Coly和来参见BeijingLSF的各位大牛，以及另外一位志愿者李劼，当然还有热心来帮忙的我的gf :)</p>

<p>附录，参会人员名单：<br />
Bo Yang, Coly Li, Fengguang Wu, Herbert Xu, Jeff He, Jeff Liu, Jiaju Zhang, Jianfeng Gui, Michael Fu, Tao Ma, Tiger Yang, Xiao Luo, Xinwei Hu, Xu Wang, Yang Li, Yawei Niu, Yilei Lu, Yu Zhong, Zefan Li, Zheng Yan.</p>

<p><img src="data:image/gif;base64,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" data-src="/images/beijinglsf2009.jpg" alt="参会人员合影" /></p>
</article>
                <section class="author">
                    <div class="avatar" style="background-image: url(/images/avatar.png);"></div>
                    <a class="name" href="/about.me.html">Bergwolf</a>
                    <div class="intro">Everyday citizen, A gear</div>
                </section>
                <section class="recommend">
                    
                    <section class="nav prev more">
                        <div class="head">Prev Reading</div>
                        <a class="link" href="/2009/11/29/three-beggars.html">The Three Beggars</a>
                    </section>
                    
                    
                    <section class="nav next more">
                        <div class="head">Next Reading</div>
                        <a class="link" href="/2009/10/10/%e7%99%be%e5%ba%a6%e7%b3%bb%e7%bb%9f%e9%83%a8%e9%9d%a2%e7%bb%8f.html">百度系统部面经</a>
                    </section>
                    
                </section>
                


            </article>
        </article>
        <footer class="footer">
    <span class="copyright">
        Bard&#39;s Gallery ©
        <script type="text/javascript">
            document.write(new Date().getFullYear());
        </script>
    </span>
    <span class="publish">Powered by <a href="http://www.chole.io/" target="_blank">Ink</a></span>
</footer>

        <script src="/bundle/index.js"></script>
    </body>
</html>
